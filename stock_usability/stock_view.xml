<?xml version="1.0" encoding="utf-8"?>

<!--
    Copyright (C) 2014-2015 Akretion (http://www.akretion.com/)
    @author Alexis de Lattre <alexis.delattre@akretion.com>
    The licence is in the file __openerp__.py
-->

<openerp>
<data>


<record id="view_picking_form" model="ir.ui.view">
    <field name="name">stock_usability.view_picking_form</field>
    <field name="model">stock.picking</field>
    <field name="inherit_id" ref="stock.view_picking_form" />
    <field name="arch" type="xml">
        <field name="backorder_id" position="attributes">
            <attribute name="attrs">{}</attribute>
        </field>
    </field>
</record>

<record id="view_picking_internal_search" model="ir.ui.view">
    <field name="name">stock_usability.view_picking_search</field>
    <field name="model">stock.picking</field>
    <field name="inherit_id" ref="stock.view_picking_internal_search" />
    <field name="arch" type="xml">
        <group expand="0" position="inside">
            <filter string="Partner" context="{'group_by': 'partner_id'}"/>
        </group>
        <filter string="Origin" position="replace"/>
    </field>
</record>

<!-- Display route in stock moves -->
<record id="view_move_form" model="ir.ui.view">
    <field name="name">stock.usability.stock.move.form</field>
    <field name="model">stock.move</field>
    <field name="inherit_id" ref="stock.view_move_form" />
    <field name="arch" type="xml">
        <button name="force_assign" position="after">
            <button type="object" name="do_unreserve" string="Unreserve"
                groups="stock.group_stock_user"
                states="confirmed,assigned"/>
        </button>
        <group name="moved_quants_grp" position="after">
            <notebook colspan="2">
                <page string="Notes" name="notes">
                    <field name="note" nolabel="1"/>
                </page>
                <page string="Advanced Parameters" name="advanced-params" groups="stock.group_stock_manager">
                    <group name="advanced">
                        <field name="procurement_id"/>
                        <field name="route_ids" widget="many2many_tags"/>
                        <field name="rule_id" readonly="1"/>
                        <field name="push_rule_id" readonly="1"/>
                        <field name="price_unit" readonly="1"/>
                    </group>
                </page>
            </notebook>
        </group>
    </field>
</record>

<record id="view_move_picking_form" model="ir.ui.view">
    <field name="name">stock.usability.stock.move.picking.form</field>
    <field name="model">stock.move</field>
    <field name="inherit_id" ref="stock.view_move_picking_form" />
    <field name="arch" type="xml">
        <group name="moved_quants_grp" position="after">
            <notebook colspan="2">
                <page string="Notes" name="notes">
                    <field name="note" nolabel="1"/>
                </page>
                <page string="Advanced Parameters" name="advanced-params" groups="stock.group_stock_manager">
                    <group name="advanced">
                        <field name="procurement_id"/>
                        <field name="group_id"/>
                        <field name="route_ids" widget="many2many_tags"/>
                        <field name="rule_id" readonly="1"/>
                        <field name="push_rule_id" readonly="1"/>
                        <field name="price_unit" readonly="1"/>
                    </group>
                </page>
            </notebook>
        </group>
    </field>
</record>

<record id="view_move_picking_tree" model="ir.ui.view">
    <field name="name">stock_usability.src_location.in.picking.form</field>
    <field name="model">stock.move</field>
    <field name="inherit_id" ref="stock.view_move_picking_tree" />
    <field name="arch" type="xml">
        <field name="location_id" position="attributes">
            <attribute name="invisible">0</attribute>
        </field>
        <field name="string_availability_info" position="after">
            <button type="object" name="do_unreserve" string="Unreserve"
                icon="STOCK_UNDO" groups="stock.group_stock_user"
                states="confirmed,assigned"/>
        </field>
    </field>
</record>

<record id="view_warehouse" model="ir.ui.view">
    <field name="name">stock.usability.warehouse.form</field>
    <field name="model">stock.warehouse</field>
    <field name="inherit_id" ref="stock.view_warehouse" />
    <field name="arch" type="xml">
        <group string="Picking Types" position="after">
            <group name="routes" string="Routes">
               <field name="route_ids" widget="many2many_tags"/>
                <field name="crossdock_route_id"/>
                <field name="reception_route_id"/>
                <field name="delivery_route_id"/>
                <field name="resupply_route_ids"/>
            </group>
        </group>
        <field name="wh_input_stock_loc_id" position="before">
            <field name="lot_stock_id" readonly="1" required="0"/>
            <field name="view_location_id" groups="base.group_no_one"
                readonly="1" required="0"/>
        </field>
    </field>
</record>

<record id="stock_location_path_action" model="ir.actions.act_window">
    <field name="name">Push Rules</field>
    <field name="res_model">stock.location.path</field>
    <field name="view_mode">tree,form</field>
</record>

<menuitem id="stock_location_path_menu" action="stock_location_path_action"
    sequence="10" parent="stock.menu_stock_configuration"/>

<!-- Display total qty in Transfer wizard
Usefull because some delivery order from suppliers contains the "total number of items"
So the Odoo user can easily check that he doesn't make mistakes
in the quantities for his reception -->
<record id="view_stock_enter_transfer_details" model="ir.ui.view">
    <field name="name">stock.usability.transfer_details.form</field>
    <field name="model">stock.transfer_details</field>
    <field name="inherit_id" ref="stock.view_stock_enter_transfer_details"/>
    <field name="arch" type="xml">
        <field name="quantity" position="attributes">
            <attribute name="sum">Total</attribute>
        </field>
    </field>
</record>

<record id="view_stock_quant_tree" model="ir.ui.view">
    <field name="name">stock.usability.quant.tree</field>
    <field name="model">stock.quant</field>
    <field name="inherit_id" ref="stock.view_stock_quant_tree"/>
    <field name="arch" type="xml">
        <field name="reservation_id" position="attributes">
            <attribute name="invisible">0</attribute>
        </field>
    </field>
</record>

<record id="view_move_tree_receipt_picking" model="ir.ui.view">
    <field name="name">stock.usability.stock.move.tree2</field>
    <field name="model">stock.move</field>
    <field name="inherit_id" ref="stock.view_move_tree_receipt_picking"/>
    <field name="arch" type="xml">
        <field name="partner_id" position="attributes">
            <attribute name="string">Destination Address</attribute>
            <!-- The partner_id field on stock.move has a label "Destination Address"
            but a stupid guy has put a string="Supplier" on the tree view
            And, as this field is very often empty, the users think there is a bug
            because the supplier is not set ! -->
date_expected
        </field>
        <field name="date_expected" position="attributes">
            <attribute name="invisible">0</attribute>
        </field>
    </field>
</record>

</data>
</openerp>
